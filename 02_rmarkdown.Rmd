---
title: "HTS Households (interactive)"
author: "Matt Landis"
date: "11/23/2020"
output: html_document
editor_options: 
  chunk_output_type: console
---

```{r setup, include=FALSE}

# Set options
knitr::opts_chunk$set(echo = TRUE, comment = '')

# Load development version of tmrtools

devtools::load_all('C:/Users/matt.landis/OneDrive - Resource Systems Group, Inc/Git/tmrtools')


# Load libraries 

library(data.table)
library(DT)
library(leaflet)

# Load data
hh_labeled = readRDS('data/tnc_bayarea_hh_labeled.rds')
hh_map = hh_labeled[
  !income_aggregate %in% c('Prefer not to answer', 'Missing: Non-response', 'Missing: Skip logic') & !is.na(income_aggregate)]

hh_table = hh_labeled[, .(hh_id, num_people, num_vehicles, income_aggregate, res_type)]

```

## Interactive tables with DT

We can make interactive tables of data very simply, using the [DT](https://rstudio.github.io/DT/) package, which is an R interface to the JavaScript library [DataTables](https://datatables.net/).

```{r showdata}
datatable(hh_table)
```


## Interactive maps with leaflet

Making interactive maps is also pretty simple using the [leaflet]() package, which wraps the JavaScript library [Leaflet](https://leafletjs.com/).

This example has been kept simple deliberately for readability of the code.

```{r map}
leaflet(hh_map) %>%
  addTiles() %>%
  addCircleMarkers(
    lng=~reported_home_lon, lat=~reported_home_lat,
    radius=5, stroke=FALSE)
```
